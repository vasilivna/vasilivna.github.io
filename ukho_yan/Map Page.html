
<!DOCTYPE html>
<html>
<head>
    <title>Map Page</title>
    <style>
        #map {
            width: 400px;
            height: 400px;
            margin: 0 auto;
        }
        #message {
            text-align: center;
            margin-top: 20px;
        }
        #audioButton {
            display: none;
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="message"></div>
    <div id="audioButton">
        <a href="audio.html">Go to Audio Page</a>
    </div>

    <script>
        function initMap() {
            var targetLocation = { lat: 50.451683, lng: 30.518379 };
            var map = new google.maps.Map(document.getElementById('map'), {
                center: targetLocation,
                zoom: 15
            });

            // Add marker for target location
            var marker = new google.maps.Marker({
                position: targetLocation,
                map: map,
                title: 'Target Location'
            });

            // Fetch visitor's geolocation
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    var visitorLocation = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };

                    // Calculate distance between visitor and target location
                    var distance = google.maps.geometry.spherical.computeDistanceBetween(targetLocation, visitorLocation);

                    // Check if visitor is within 100 meter radius
                    if (distance <= 100) {
                        document.getElementById('audioButton').style.display = 'block';
                    } else {
                        document.getElementById('message').innerText = 'Please proceed to the location shown on the map.';
                    }
                });
            } else {
                document.getElementById('message').innerText = 'Geolocation is not supported by your browser.';
            }
        }
    </script>
    
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD8tdYlUM5TqdawZHTNxXMlbAAkxcGa4Vo&libraries=geometry&callback=initMap" async defer></script>
</body>
</html>
